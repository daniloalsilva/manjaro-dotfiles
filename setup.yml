---
  - name: "Playing with Ansible and Git"
    hosts: localhost
    connection: local 
    tasks:
    
    - name: Enable AUR
      replace:
        path: /etc/pamac.conf
        regexp: '#EnableAUR'
        replace: 'EnableAUR'
      register: aur_enabled 
      become: yes

    - name: Update Pamac - do not wait
      shell:
        cmd: yes | pamac update &
      become: yes
      when: aur_enabled.changed

    - name: "install vim"
      package:
        name: vim
        state: present
      become: yes

    - name: "install vscode"
      package:    
        name: vscode
        state: present
      become: yes

    - name: "install chromium"
      package:
        name: chromium
        state: present
      become: yes

    roles:
    - xfce-files
    - xfce-whisker
